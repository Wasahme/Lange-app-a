#!/bin/bash

# ๐ ููู ุชุดุบูู ุชุทุจูู ุงูุฏุฑุฏุดุฉ ุงููุดูุฑุฉ
# Advanced Encrypted Bluetooth Chat Application

echo "๐ ุจุฏุก ุชุดุบูู ุชุทุจูู ุงูุฏุฑุฏุดุฉ ุงููุดูุฑุฉ ุงููุชูุฏู..."
echo "=================================================="

# ุงูุชุญูู ูู ูุฌูุฏ Android SDK
if [ -z "$ANDROID_HOME" ]; then
    echo "โ ุฎุทุฃ: ANDROID_HOME ุบูุฑ ูุญุฏุฏ"
    echo "ูุฑุฌู ุชุซุจูุช Android SDK ูุชุญุฏูุฏ ูุชุบูุฑ ANDROID_HOME"
    exit 1
fi

# ุงูุชุญูู ูู ูุฌูุฏ ADB
if ! command -v adb &> /dev/null; then
    echo "โ ุฎุทุฃ: ADB ุบูุฑ ูุซุจุช"
    echo "ูุฑุฌู ุชุซุจูุช Android SDK tools"
    exit 1
fi

# ุงูุชุญูู ูู ุงุชุตุงู ุงูุฌูุงุฒ
echo "๐ ุงูุชุญูู ูู ุงุชุตุงู ุงูุฌูุงุฒ..."
if ! adb devices | grep -q "device$"; then
    echo "โ ูุง ููุฌุฏ ุฌูุงุฒ ูุชุตู"
    echo "ูุฑุฌู ุชูุตูู ุฌูุงุฒ Android ูุชูุนูู ูุถุน ุงููุทูุฑ"
    echo "ุฃู ุชุดุบูู ูุญุงูู Android"
    exit 1
fi

echo "โ ุชู ุงูุนุซูุฑ ุนูู ุฌูุงุฒ ูุชุตู"

# ุชูุธูู ุงููุดุฑูุน
echo "๐งน ุชูุธูู ุงููุดุฑูุน..."
if [ -f "gradlew" ]; then
    ./gradlew clean
else
    echo "โ ููู gradlew ุบูุฑ ููุฌูุฏ"
    echo "ูุฑุฌู ุชุดุบูู ุงูุฃูุฑ ูู ูุฌูุฏ ุงููุดุฑูุน ุงูุฑุฆูุณู"
    exit 1
fi

# ุจูุงุก ุงูุชุทุจูู
echo "๐จ ุจูุงุก ุงูุชุทุจูู..."
./gradlew assembleDebug

if [ $? -eq 0 ]; then
    echo "โ ุชู ุจูุงุก ุงูุชุทุจูู ุจูุฌุงุญ"
else
    echo "โ ูุดู ูู ุจูุงุก ุงูุชุทุจูู"
    exit 1
fi

# ุชุซุจูุช ุงูุชุทุจูู
echo "๐ฑ ุชุซุจูุช ุงูุชุทุจูู ุนูู ุงูุฌูุงุฒ..."
adb install -r app/build/outputs/apk/debug/app-debug.apk

if [ $? -eq 0 ]; then
    echo "โ ุชู ุชุซุจูุช ุงูุชุทุจูู ุจูุฌุงุญ"
else
    echo "โ ูุดู ูู ุชุซุจูุช ุงูุชุทุจูู"
    exit 1
fi

# ุชุดุบูู ุงูุชุทุจูู
echo "๐ ุชุดุบูู ุงูุชุทุจูู..."
adb shell am start -n com.bluetoothchat.encrypted/.ui.advanced.AdvancedMainActivity

echo "=================================================="
echo "๐ ุชู ุชุดุบูู ุงูุชุทุจูู ุจูุฌุงุญ!"
echo ""
echo "๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ:"
echo "1. ุงููุญ ุงูุตูุงุญูุงุช ุงููุทููุจุฉ (Bluetooth, ุงููููุน, ุงููููุฑูููู)"
echo "2. ูุนู Bluetooth ูู ุฅุนุฏุงุฏุงุช ุงูุฌูุงุฒ"
echo "3. ุงุถุบุท ุฒุฑ ุงูุจุญุซ ูุงูุชุดุงู ุงูุฃุฌูุฒุฉ"
echo "4. ุงุฎุชุฑ ุฌูุงุฒ ูุงุถุบุท 'ุงุชุตุงู'"
echo "5. ุงุจุฏุฃ ุงููุญุงุฏุซุฉ!"
echo ""
echo "๐ ููุฒุงุช ุงูุชุทุจูู:"
echo "โข ุชุดููุฑ AES-256-GCM ูุชูุฏู"
echo "โข ุฐูุงุก ุงุตุทูุงุนู ูุชุญููู ุงููุดุงุนุฑ"
echo "โข ุดุจูุฉ mesh ููุงุชุตุงู ุงููุชุนุฏุฏ"
echo "โข ุตูุช ุนุงูู ุงูุฌูุฏุฉ ูุน ุฅูุบุงุก ุงูุถูุถุงุก"
echo "โข ูุงุฌูุฉ ูุณุชุฎุฏู ุญุฏูุซุฉ ุจู Material Design 3"
echo ""
echo "๐ ูููุฒูุฏ ูู ุงููุนูููุงุช:"
echo "โข ุฏููู ุงูุชุดุบูู ุงูุณุฑูุน: QUICK_START.md"
echo "โข ุฏููู ุงูุชุดุบูู ุงูุดุงูู: MOBILE_SETUP.md"
echo "โข ุงูุชูุซูู ุงููุงูู: README.md"
echo ""
echo "๐ฏ ุงุณุชูุชุน ุจุชุฌุฑุจุฉ ุฏุฑุฏุดุฉ ุขููุฉ ููุดูุฑุฉ!"